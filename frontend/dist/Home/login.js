import loginBackground from"./slide1a.jpg";export function loadLoginPage(){const e=document.querySelector("main");function n(e){let n=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let t=0;t<o.length;t++){const r=o[t].trim();if(r.startsWith(e+"=")){n=decodeURIComponent(r.substring(e.length+1));break}}}return n}e?(e.innerHTML="",e.innerHTML=`\n    <div class="container-xxl" style="background-image: url('${loginBackground}'); background-size: cover; background-position: center; height: 100vh;">\n        <div class="container py-2">\n            <div class="row justify-content-center align-items-center" style="min-height: 100vh;">\n                <div class="col-lg-6 col-md-8 text-center">\n                    <div class="shadow-lg p-3 bg-white rounded" style="opacity: 0.85; max-width: 400px; margin: 0 auto;">\n                        <h3 class="display-6 text-dark mb-2 font-weight-bold" style="font-size: 1.25rem;">Welcome to Our Platform</h3>\n                        <p class="lead text-muted mb-2" style="font-size: 0.9rem;">Please enter your login details to continue.</p>\n\n                        \x3c!-- Login Form Section Start --\x3e\n                        <form id="loginForm" class="shadow p-3 bg-white rounded">\n                            <h4 class="mb-3 text-center" style="font-size: 1rem;">Login to Your Account</h4>\n                            <div class="form-floating mb-2">\n                                <input type="text" class="form-control form-control-sm" id="username" placeholder="Username" required>\n                                <label for="username">Username</label>\n                            </div>\n                            <div class="form-floating mb-2">\n                                <input type="password" class="form-control form-control-sm" id="password" placeholder="Password" required>\n                                <label for="password">Password</label>\n                            </div>\n\n                            \x3c!-- Role Dropdown positioned to the right of the label --\x3e\n                            <div class="row mb-2">\n                                <div class="col-6 text-start">\n                                    <label for="role" class="form-label" style="font-size: 0.85rem;">Role</label>\n                                </div>\n                                <div class="col-6 text-end">\n                                    <select class="form-control form-control-sm" id="role" required>\n                                        <option value="" disabled selected>Select Role</option>\n                                        <option value="student">Student</option>\n                                        <option value="staff">Staff</option>\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div class="form-check mb-2">\n                                <input type="checkbox" class="form-check-input" id="rememberMe">\n                                <label class="form-check-label" for="rememberMe" style="font-size: 0.85rem;">Remember Me</label>\n                            </div>\n                            <button type="submit" class="btn btn-primary w-100 btn-sm">Login</button>\n                            <div class="mt-2 text-center">\n                                <a href="#">Forgot Password?</a>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    `,document.getElementById("loginForm").addEventListener("submit",(async function(e){e.preventDefault();const o=document.getElementById("username").value,t=document.getElementById("password").value,r=document.getElementById("role").value;if(o&&t&&r)try{const e=await fetch("/api/login/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":n("csrftoken")},body:JSON.stringify({username:o,password:t,role:r})});if(e.ok){const n=await e.json();alert(n.message),window.location.href=n.redirect_url}else{const n=await e.json();alert(n.error||"Login failed. Please try again.")}}catch(e){console.error("Error logging in:",e),alert("An error occurred. Please try again later.")}else alert("Please fill in all fields.")}))):console.error("Main element not found")}